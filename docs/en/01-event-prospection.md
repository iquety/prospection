# Event Prospection

[◂ Documentation Summary](index.md) | [Event Store ▸](02-event-store.md)
-- | --

## "DataBase First" approach

In the "DataBase First" approach, much of the concern is focused on structuring the database. First, the structure of the database is modeled, and then the application is implemented.

The implementation follows the following flow:

1. **Requirements analysis**: define the business rules;
2. **Data modeling**: determine the entities that will compose the database structure;
3. **Automation in creating tables**: create scripts to generate tables in the database;
4. **Implementation**: the business rules are implemented based on database entities.

Maintenance follows the following flow:

1. **Requirements analysis**: define changes in business rules;
2. **Data modeling**: determine a new structure for the database (removal, creation and alteration of fields);
3. **Automation in creating tables**: create scripts to update tables in the database;
4. **Implementation**: the business rules are implemented based on the new database entities.

### Benefits

Each entity will have a related table in the database, so that, when looking at its structure, we can easily identify the values that form the current state of each entity in the system.

Easier to understand, teach and implement.

### Disadvantages

To keep the data consolidated, insert and update operations need to be used. Inserts are very fast, but updates are more costly for the database (mainly in heavily accessed applications).

Before implementing evolutions or maintenance in the application, it is necessary to adjust the database, which will make the deployment automation process more difficult.

We will only have the final data of each entity, which will make the understanding process difficult (mainly in complex routines). We will periodically be asked the question, "How did the user manage to produce this result?"

## "Event Sourcing" approach

Unlike the "DataBase First" approach, "Event Sourcing" (also known as "Event Prospection") does not focus on the data, but on the events that occurred during the execution of the rule.

As the final data is just a "consequence" of the execution of the various events within the business rule, this approach stores the events instead of the data. With the stored events, we have the possibility of re-executing them at any time, exactly repeating the actions performed by the user.

The implementation follows the following flow:

1. **Table of events**: creation of a single table that will store all system events;
2. **Requirements analysis**: define the business rules;
3. **Domain modeling**: determine the entities and their respective events;
4. **Implementation**: the business rules are implemented based on defined entities and events.

Maintenance follows the following flow:

1. **Requirements analysis**: define the business rules;
2. **Domain modeling**: determine what will be changed or added to entities and events;
3. **Implementation**: Business rules are updated based on defined entities and events.

### Benefits

Any operation previously performed may be undone or re-executed at any time.

The information generated by executing a sequence of events can be materialized in separate databases, providing great flexibility. Executing events can materialize the data to many different destinations: a table for reports, a simple list for queries in a data grid, or any other structure.

The data can be deleted and materialized again at any time. In the process, very simple tables without JOINs can be generated, optimizing the query and generating instant results for the user.

Eliminates the need for normalization in the database.

It makes it possible to identify exactly what the user did to reach a certain result in any operation.

As there is no concern with the "schema" of the database. As materializations create their structures at runtime, deployment becomes easier and safer, depending only on the implemented source code.

### Disadvantages

All entities will have their events stored in a standard way, intentionally formatted for the system to understand. This way, when looking at the table of events, it will not be so easy for us to understand the structure of entities, but it will be easy for us to understand the flow of events.

Because it is an approach that does not focus on data, the learning curve is greater, especially for inexperienced developers.

[◂ Documentation Summary](index.md) | [Event Store ▸](02-event-store.md)
-- | --
